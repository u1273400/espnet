Cloning into 'warp-transducer'...
-- The C compiler identification is GNU 5.4.0
-- The CXX compiler identification is GNU 5.4.0
-- Check for working C compiler: /usr/bin/cc
-- Check for working C compiler: /usr/bin/cc -- works
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Detecting C compile features
-- Detecting C compile features - done
-- Check for working CXX compiler: /usr/bin/c++
-- Check for working CXX compiler: /usr/bin/c++ -- works
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Looking for pthread.h
-- Looking for pthread.h - found
-- Looking for pthread_create
-- Looking for pthread_create - not found
-- Looking for pthread_create in pthreads
-- Looking for pthread_create in pthreads - not found
-- Looking for pthread_create in pthread
-- Looking for pthread_create in pthread - found
-- Found Threads: TRUE  
-- Found CUDA: /usr/local/cuda-10.1 (found version "10.1") 
-- cuda found TRUE
-- Building shared library with GPU support
-- Configuring done
-- Generating done
-- Build files have been written to: /home/john/src/espnet/tools/warp-transducer/build
[  7%] Building NVCC (Device) object CMakeFiles/warprnnt.dir/src/warprnnt_generated_rnnt_entrypoint.cu.o
Scanning dependencies of target warprnnt
[ 14%] Linking CXX shared library libwarprnnt.so
[ 14%] Built target warprnnt
[ 21%] Building NVCC (Device) object CMakeFiles/test_gpu.dir/tests/test_gpu_generated_test_gpu.cu.o
Scanning dependencies of target test_gpu
[ 28%] Building CXX object CMakeFiles/test_gpu.dir/tests/random.cpp.o
[ 35%] Linking CXX executable test_gpu
[ 35%] Built target test_gpu
[ 42%] Building NVCC (Device) object CMakeFiles/test_time_gpu.dir/tests/test_time_gpu_generated_test_time.cu.o
Scanning dependencies of target test_time_gpu
[ 50%] Building CXX object CMakeFiles/test_time_gpu.dir/tests/random.cpp.o
[ 57%] Linking CXX executable test_time_gpu
[ 57%] Built target test_time_gpu
Scanning dependencies of target test_cpu
[ 64%] Building CXX object CMakeFiles/test_cpu.dir/tests/test_cpu.cpp.o
[ 71%] Building CXX object CMakeFiles/test_cpu.dir/tests/random.cpp.o
[ 78%] Linking CXX executable test_cpu
[ 78%] Built target test_cpu
Scanning dependencies of target test_time
[ 85%] Building CXX object CMakeFiles/test_time.dir/tests/test_time.cpp.o
[ 92%] Building CXX object CMakeFiles/test_time.dir/tests/random.cpp.o
[100%] Linking CXX executable test_time
[100%] Built target test_time
running install
running bdist_egg
running egg_info
creating warprnnt_pytorch.egg-info
writing warprnnt_pytorch.egg-info/PKG-INFO
writing dependency_links to warprnnt_pytorch.egg-info/dependency_links.txt
writing top-level names to warprnnt_pytorch.egg-info/top_level.txt
writing manifest file 'warprnnt_pytorch.egg-info/SOURCES.txt'
reading manifest file 'warprnnt_pytorch.egg-info/SOURCES.txt'
writing manifest file 'warprnnt_pytorch.egg-info/SOURCES.txt'
installing library code to build/bdist.linux-x86_64/egg
running install_lib
running build_py
creating build
creating build/lib.linux-x86_64-3.7
creating build/lib.linux-x86_64-3.7/warprnnt_pytorch
copying warprnnt_pytorch/__init__.py -> build/lib.linux-x86_64-3.7/warprnnt_pytorch
running build_ext
building 'warprnnt_pytorch.warp_rnnt' extension
creating /home/john/src/espnet/tools/warp-transducer/pytorch_binding/build/temp.linux-x86_64-3.7
creating /home/john/src/espnet/tools/warp-transducer/pytorch_binding/build/temp.linux-x86_64-3.7/src
Emitting ninja build file /home/john/src/espnet/tools/warp-transducer/pytorch_binding/build/temp.linux-x86_64-3.7/build.ninja...
Compiling objects...
Allowing ninja to set a default number of workers... (overridable by setting the environment variable MAX_JOBS=N)
[1/1] c++ -MMD -MF /home/john/src/espnet/tools/warp-transducer/pytorch_binding/build/temp.linux-x86_64-3.7/src/binding.o.d -pthread -B /home/john/src/espnet/tools/venv/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/john/src/espnet/tools/warp-transducer/include -I/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include -I/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/torch/csrc/api/include -I/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/TH -I/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/THC -I/home/john/src/espnet/tools/venv/include/python3.7m -c -c /home/john/src/espnet/tools/warp-transducer/pytorch_binding/src/binding.cpp -o /home/john/src/espnet/tools/warp-transducer/pytorch_binding/build/temp.linux-x86_64-3.7/src/binding.o -fPIC -std=c++14 -DWARPRNNT_ENABLE_GPU -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=warp_rnnt -D_GLIBCXX_USE_CXX11_ABI=0
FAILED: /home/john/src/espnet/tools/warp-transducer/pytorch_binding/build/temp.linux-x86_64-3.7/src/binding.o 
c++ -MMD -MF /home/john/src/espnet/tools/warp-transducer/pytorch_binding/build/temp.linux-x86_64-3.7/src/binding.o.d -pthread -B /home/john/src/espnet/tools/venv/compiler_compat -Wl,--sysroot=/ -Wsign-compare -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/home/john/src/espnet/tools/warp-transducer/include -I/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include -I/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/torch/csrc/api/include -I/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/TH -I/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/THC -I/home/john/src/espnet/tools/venv/include/python3.7m -c -c /home/john/src/espnet/tools/warp-transducer/pytorch_binding/src/binding.cpp -o /home/john/src/espnet/tools/warp-transducer/pytorch_binding/build/temp.linux-x86_64-3.7/src/binding.o -fPIC -std=c++14 -DWARPRNNT_ENABLE_GPU -DTORCH_API_INCLUDE_EXTENSION_H -DTORCH_EXTENSION_NAME=warp_rnnt -D_GLIBCXX_USE_CXX11_ABI=0
cc1plus: warning: command line option ‘-Wstrict-prototypes’ is valid for C/ObjC but not for C++
In file included from /home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/ATen/Parallel.h:149:0,
                 from /home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/torch/csrc/api/include/torch/utils.h:3,
                 from /home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/torch/csrc/api/include/torch/nn/cloneable.h:5,
                 from /home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/torch/csrc/api/include/torch/nn.h:3,
                 from /home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/torch/csrc/api/include/torch/all.h:12,
                 from /home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/torch/extension.h:4,
                 from /home/john/src/espnet/tools/warp-transducer/pytorch_binding/src/binding.cpp:4:
/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/ATen/ParallelOpenMP.h:84:0: warning: ignoring #pragma omp parallel [-Wunknown-pragmas]
 #pragma omp parallel for if ((end - begin) >= grain_size)
 ^
In file included from /home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/THC/THCGeneral.h:7:0,
                 from /home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/THC/THC.h:4,
                 from /home/john/src/espnet/tools/warp-transducer/pytorch_binding/src/binding.cpp:8:
/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/include/c10/cuda/CUDAStream.h:6:30: fatal error: cuda_runtime_api.h: No such file or directory
compilation terminated.
ninja: build stopped: subcommand failed.
Traceback (most recent call last):
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/cpp_extension.py", line 1522, in _run_ninja_build
    env=env)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/subprocess.py", line 487, in run
    output=stdout, stderr=stderr)
subprocess.CalledProcessError: Command '['ninja', '-v']' returned non-zero exit status 1.

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "setup.py", line 58, in <module>
    'build_ext': BuildExtension
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/setuptools/__init__.py", line 153, in setup
    return distutils.core.setup(**attrs)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/core.py", line 148, in setup
    dist.run_commands()
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/dist.py", line 966, in run_commands
    self.run_command(cmd)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/dist.py", line 985, in run_command
    cmd_obj.run()
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/setuptools/command/install.py", line 67, in run
    self.do_egg_install()
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/setuptools/command/install.py", line 109, in do_egg_install
    self.run_command('bdist_egg')
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/cmd.py", line 313, in run_command
    self.distribution.run_command(command)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/dist.py", line 985, in run_command
    cmd_obj.run()
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/setuptools/command/bdist_egg.py", line 167, in run
    cmd = self.call_command('install_lib', warn_dir=0)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/setuptools/command/bdist_egg.py", line 153, in call_command
    self.run_command(cmdname)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/cmd.py", line 313, in run_command
    self.distribution.run_command(command)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/dist.py", line 985, in run_command
    cmd_obj.run()
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/setuptools/command/install_lib.py", line 11, in run
    self.build()
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/command/install_lib.py", line 107, in build
    self.run_command('build_ext')
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/cmd.py", line 313, in run_command
    self.distribution.run_command(command)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/dist.py", line 985, in run_command
    cmd_obj.run()
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/setuptools/command/build_ext.py", line 79, in run
    _build_ext.run(self)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/Cython/Distutils/old_build_ext.py", line 186, in run
    _build_ext.build_ext.run(self)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/command/build_ext.py", line 340, in run
    self.build_extensions()
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/cpp_extension.py", line 653, in build_extensions
    build_ext.build_extensions(self)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/Cython/Distutils/old_build_ext.py", line 195, in build_extensions
    _build_ext.build_ext.build_extensions(self)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/command/build_ext.py", line 449, in build_extensions
    self._build_extensions_serial()
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/command/build_ext.py", line 474, in _build_extensions_serial
    self.build_extension(ext)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/setuptools/command/build_ext.py", line 196, in build_extension
    _build_ext.build_extension(self, ext)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/distutils/command/build_ext.py", line 534, in build_extension
    depends=ext.depends)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/cpp_extension.py", line 482, in unix_wrap_ninja_compile
    with_cuda=with_cuda)
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/cpp_extension.py", line 1238, in _write_ninja_file_and_compile_objects
    error_prefix='Error compiling objects for extension')
  File "/home/john/src/espnet/tools/venv/lib/python3.7/site-packages/torch/utils/cpp_extension.py", line 1538, in _run_ninja_build
    raise RuntimeError(message) from e
RuntimeError: Error compiling objects for extension
